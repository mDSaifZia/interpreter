# RATSNAKE Interpreter

 **Ratsnake** is an interpreted dynamically typed language developed by our team. It uses a C-based virtual machine that reads and runs a compiled custom binary file **.rtskB**. 
 
## Architecture
Ratsnake's architecture is based on a basic stack based implementation where Objects and primitives are pushed to a stack and popped when an  operator instruction is read in. All **types** in Ratsnake are treated as either **Objects** or **Primitives**, and operator tokens are actually function/ "method" calls of these PseudoObjects.

Visualisation of Ratsnake's architechture:

Anatomy of PrimitiveObject:

## keywords and features 
 
| Features|Example  |
|--|--|
| Declare var|``` var x = 5```  |
| Assign var|``` x = "hello"```  |
| For loop|``` loop i from(1,5){...}```  |
| While loop|``` while (condition) {...}```  |
| Bitwise OR, AND, XOR, LSHIFT, RSHIFT|``` \|, &, ^, <<, >>```  |
| Compare|``` ==, !=, >=, <=, >, <```  |
| Logical|``` \|\|, &&, !```  |
| Function definition|``` fn f(args) {}```  |
| Function call|``` f(args);```  |
| Comments|``` // This is a comment```  |
| Dynamic typing|``` var x =  "Hello" ; x = 5; ```  |
****
| Data types|Description|
|--|--|
| Primitive **int**| PrimtiveObject integer data type of ratsnake, holds a long signed integer (8 bytes)  |
| Primitive **float**| PrimtiveObject float data type of ratsnake, holds a double (8 bytes)  |
| Primitive **str**| PrimtiveObject string data type of ratsnake, holds a maximum of around 4GB of string length *(not reccomended)*  |
| Primitive **NULL**| PrimtiveObject NULL data type of ratsnake. Represents NULL value *Despite it's name Primitive NULL is most similar to Python's None* |
| Primitive **Bool**| PrimtiveObject bool data type of ratsnake, holds a int8_t (1 bytes) either 1 or 0 |
| Object **Object**| Unimplemented but is meant to represent all advanced object types and classes. |
****
Below is the list of OPCODES of Ratsnake. Source code is first parsed and then transpiled into this intermediate representation *(before finally being compiled into the custom binary format)*.
| OPCODE |Description|
|--|--|
| OP_ADD| Calls add function pointer of PrimitiveObjects and Objects  |
| OP_SUB| Calls sub function pointer of PrimitiveObjects and Objects  |

## Syntax
Ratsnake's source code syntax is based on a hybrid between C, Python and JavaScript. 
**Examples:**
>Source Code
>```
>fn fib(n) {
>    if (n <= 1) {
>       return 1;
>    }
>    return fib(n-1) + fib(n-2);
>}
>var result = fib(10);
>print(result);
>```
****
The bytecode generated by the parser and lexer can be found below.
>Intermediate Representation Bytecode
>```
>INT 4
>FLOAT 5 
>OP_SUB
>ID 1 x
>OP_SET_GLOBAL
>```


## Compilation
Ratsnake requires GCC to compile, to install gcc run the following commands:
>**Linux** (Ubuntu/Debian/WSL based distributions) Bash
>```Bash
>sudo apt update
>sudo apt install build-essential
>gcc --version
>sudo dnf install gcc gcc-c++ make
>gcc --version // check your gcc version
>```

>**Windows** (10/ 11) PowerShell
>```Powershell
>Set-ExecutionPolicy Bypass -Scope Process -Force; `
>[System.Net.ServicePointManager]::SecurityProtocol = `
>[System.Net.ServicePointManager]::SecurityProtocol -bor >3072; `
>iex ((New-Object System.Net.WebClient).DownloadString
>('https://community.chocolatey.org/install.ps1'))
>choco install mingw -y
>gcc --version //check your gcc version
>```
To compile the Ratsnake virtual machine on Linux and Windows, just run the following command on the terminal in the root directory of the project. 
```Bash
make
```
This will produce a ***ratsnake*** executable file if compiled on Linux or a ***ratsnake.exe*** executable if compiled on Windows (Inside the project root directory).

## Running Ratsnake vm

You can rename the current file by clicking the file name in the navigation bar or by clicking the **Rename** button in the file explorer.

